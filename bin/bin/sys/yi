#!/usr/bin/env bash

#  ▄▄▄▄· • ▌ ▄ ·. ▪  ▄▄▌   ▄▄· .▄▄ ·   ──────────────────────
#  ▐█ ▀█▪·██ ▐███▪██ ██•  ▐█ ▌▪▐█ ▀.   ╔╦╗╔═╗╔╦╗╔═╗╦╦  ╔═╗╔═╗
#  ▐█▀▀█▄▐█ ▌▐▌▐█·▐█·██ ▪ ██ ▄▄▄▀▀▀█▄   ║║║ ║ ║ ╠╣ ║║  ║╣ ╚═╗
#  ██▄▪▐███ ██▌▐█▌▐█▌▐█▌ ▄▐███▌▐█▄▪▐█  ═╩╝╚═╝ ╩ ╚  ╩╩═╝╚═╝╚═╝
#  ·▀▀▀▀ ▀▀  █▪▀▀▀▀▀▀.▀▀▀ ·▀▀▀  ▀▀▀▀   https://dot.bmilcs.com
#                 YAY INSTALLER [./yi]

source _bm
_t yay install 

# yay -Slq | fzf --multi \
#   --preview 'cat <(yay -Si {1}) <(yay -Fl {1} | awk "{print \$2}")' \
#   | xargs -ro yay -S

yi_list=/tmp/yi_list
rm -rf "$yi_list"

{
set -x
yay -Slq --sortby votes\
  | fzf -m \
  --preview 'yay -Si {1}' \
  | yay -S --answerclean None --answerdiff None --answeredit None - | \
    tee "$yi_list"
set +x
} || {
  pacfix "$yi_list"
}
