#!/usr/bin/env bash
#  ▄▄▄▄· • ▌ ▄ ·. ▪  ▄▄▌   ▄▄· .▄▄ ·   ──────────────────────
#  ▐█ ▀█▪·██ ▐███▪██ ██•  ▐█ ▌▪▐█ ▀.   ╔╦╗╔═╗╔╦╗╔═╗╦╦  ╔═╗╔═╗
#  ▐█▀▀█▄▐█ ▌▐▌▐█·▐█·██ ▪ ██ ▄▄▄▀▀▀█▄   ║║║ ║ ║ ╠╣ ║║  ║╣ ╚═╗
#  ██▄▪▐███ ██▌▐█▌▐█▌▐█▌ ▄▐███▌▐█▄▪▐█  ═╩╝╚═╝ ╩ ╚  ╩╩═╝╚═╝╚═╝
#  ·▀▀▀▀ ▀▀  █▪▀▀▀▀▀▀.▀▀▀ ·▀▀▀  ▀▀▀▀   https://dot.bmilcs.com
#                 DISTRO CLASSIFICATION [./_distro]
#────────────────────────────────────────────────────────────

if [ -f /etc/os-release ]; then # freedesktop.org and systemd
    . /etc/os-release && DISTRO=$NAME && VER=$VERSION_ID

elif type lsb_release >/dev/null 2>&1; then # linuxbase.org
    DISTRO=$(lsb_release -si) && VER=$(lsb_release -sr)

elif [ -f /etc/lsb-release ]; then # debian, ubuntu w/o lsb_release
    . /etc/lsb-release && DISTRO=$DISTRIB_ID && VER=$DISTRIB_RELEASE

elif [ -f /etc/debian_version ]; then # debian, ubuntu, older, etc.
    DISTRO=debian && VER=$(cat /etc/debian_version)

elif [ -f /etc/SuSe-release ]; then # opensuse, older, etc
    DISTRO=suse

elif [ -f /etc/redhat-release ]; then # red hat, centos, older, etc.
    DISTRO=redhat

else # resort to "linux <version>" (misc, bsd, etc)
    DISTRO=$(uname -s) && VER=$(uname -r)

fi

DISTRO="$(echo $DISTRO | tr '[:upper:]' '[:lower:]')"
VER="$(echo $VER | tr '[:upper:]' '[:lower:]')"

export DISTRO
export VER
