#!/usr/bin/env bash
#  ▄▄▄▄· • ▌ ▄ ·. ▪  ▄▄▌   ▄▄· .▄▄ ·   ──────────────────────
#  ▐█ ▀█▪·██ ▐███▪██ ██•  ▐█ ▌▪▐█ ▀.   ╔╦╗╔═╗╔╦╗╔═╗╦╦  ╔═╗╔═╗
#  ▐█▀▀█▄▐█ ▌▐▌▐█·▐█·██ ▪ ██ ▄▄▄▀▀▀█▄   ║║║ ║ ║ ╠╣ ║║  ║╣ ╚═╗
#  ██▄▪▐███ ██▌▐█▌▐█▌▐█▌ ▄▐███▌▐█▄▪▐█  ═╩╝╚═╝ ╩ ╚  ╩╩═╝╚═╝╚═╝
#  ·▀▀▀▀ ▀▀  █▪▀▀▀▀▀▀.▀▀▀ ·▀▀▀  ▀▀▀▀   https://dot.bmilcs.com
#              FOLDER FZF > NVIM [./cn]
#
# TODO
# add -h options, with print-outs, based on case statement
#────────────────────────────────────────────────────────────
source _bm

unset s
unset f
unset c

# definitions
case $1 in

  a ) f="$D/opt/alacritty";; aa) c="$D/opt/alacritty";;
  b ) f="$D/bin";; bb ) c="$D/bin" ;;
  d ) f=~/.config/dunst;; dd) c=~/.config/dunst ;;
  i ) f="$D/opt/i3/.config/i3";; ii) c="$D/opt/i3/.config/i3";;
  p ) f="$D/opt/polybar/.config/polybar";; pp) c="$D/opt/polybar/.config/polybar/";;
  r ) f="$D/opt/rofi";; rr) c="$D/opt/rofi/.config/myrofi/" ;;
  s ) f="$D/vim/.config/nvim/snips";; ss) c="$D/vim/.config/nvim/snips";;
  t ) f=~/txt;; tt) c=~/txt ;;
  u ) s="/usr/local/bin";; uu) c="/usr/local/bin" ;;
  v ) f="$D/vim";; vv) c="$D/vim";;
  z ) f="$D/zsh";; zz) c="$D/zsh";;
  x ) s="$D/opt/xorg" ;; ss) c=$"D/opt/xorg" ;;
  n ) genls "$D"/opt/ncmpcpp NCMPCPP ;;
  tm ) nvim "$D"/opt/tmux/.tmux.conf ;;
  # e) nvim "$D"/bin/bin/cfg ;;
  # tm | tmux) nvim "$D"/opt/tmux/.tmux.conf ;;
  # e) nvim "$D"/bin/bin/cfg ;;
  # #xterm)    vim ~/.Xresources.d/xterm;;
  # k) nvim "$D"/opt/sxhkd/.config/sxhkd/sxhkdrc ;;
  # bsp) nvim "$D"/opt/bspwm/.config/bspwm/bspwmrc ;;

  * ) _e no input found 
      nvim $(which ff)
      exit 1;;
esac

if [ -z "$c" ] && [ -z "$s" ]; then
  _o nvim: \'"$f"\'
  fd -uu -tf -tl . "$f"\
    | sort \
    | fzf --preview 'bat --color "always" {}' --delimiter / --with-nth -1 --multi \
    | xargs -I bm nvim bm
elif [ -z "$c" ] && [ -z "$f" ]; then
  _o sudo nvim: \'"$f"\'
  fd -uu -tf -tl . "$f"\
    | sort \
    | fzf --preview 'bat --color "always" {}' --delimiter / --with-nth -1 --multi \
    | xargs -I bm sudo nvim bm
else
  _o c: cd \'"$c"\'
  cd $c || _e "$c doesn't exist"
  $SHELL
fi
