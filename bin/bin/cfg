#!/bin/bash
#  ▄▄▄▄· • ▌ ▄ ·. ▪  ▄▄▌   ▄▄· .▄▄ ·   ──────────────────────
#  ▐█ ▀█▪·██ ▐███▪██ ██•  ▐█ ▌▪▐█ ▀.   ╔╦╗╔═╗╔╦╗╔═╗╦╦  ╔═╗╔═╗
#  ▐█▀▀█▄▐█ ▌▐▌▐█·▐█·██ ▪ ██ ▄▄▄▀▀▀█▄   ║║║ ║ ║ ╠╣ ║║  ║╣ ╚═╗
#  ██▄▪▐███ ██▌▐█▌▐█▌▐█▌ ▄▐███▌▐█▄▪▐█  ═╩╝╚═╝ ╩ ╚  ╩╩═╝╚═╝╚═╝
#  ·▀▀▀▀ ▀▀  █▪▀▀▀▀▀▀.▀▀▀ ·▀▀▀  ▀▀▀▀   https://dot.bmilcs.com
#────────────────────────────────────────────────────────────
#   config file editor
#────────────────────────────────────────────────────────────

source _head
_t cfg editor

genls() {
  _a "$2"
  ls "$1"
  unset options i
  unset optz ii
  while IFS= read -r -d $'\0' f; do
    options[i++]="$f"
    #f=$(echo $f | sed -En "s/(.*)\/home\/bmilcs\/bm(\/.*$)/\1 \2/p")
  done < <(find "$1" -type f -name "*" -print0 | sort -z )
  select opt in "${options[@]}" $3 ; do
    case $opt in
      *) [[ -f "$opt" ]] && nvim "$opt" ; exit 0 ;;
    esac
  done
  }

if [ $# = 0 ]; then
  _o t     txt
  _o b     bin
  _o z     zsh  
  _o v     vim  
  _o p     polybar  
  _o k     sxhkd  
  _o bsp   bspwm  
  _o i     i3  
  _o tmux  tmux  
  _o x     xorg
  _o n     ncmpcpp
  _o r     rofi
  _o e     cfg script
  read -r sel
else
  sel=${1}
fi

case $sel in
  t) genls "$D"/txt TXT;;
  b) genls "$D"/bin BIN;;
  i) genls "$D"/opt/i3/.config/i3/ I3;;
  #z) nvim -S ~/dev/zsh.bm;;
  z) genls "$D"/zsh ZSH;;
  v) genls "$D"/vim VIM;;
  p) genls "$D"/polybar POLYBAR;;
  k) nvim "$D"/sxhkd/.config/sxhkd/sxhkdrc;;
  r) genls "$D"/rofi ROFI;;
  bsp) nvim "$D"/opt/bspwm/.config/bspwm/bspwmrc;;
  tm|tmux) nvim "$D"/opt/tmux/.tmux.conf;;
  x|xorg) genls "$D"/opt/xorg XORG;;
  n|ncm) genls "$D"/opt/ncmpcpp NCMPCPP;;
  #8) sudovim /etc/hosts;;
  #xterm) vim ~/.Xresources.d/xterm;;
  e) nvim "$D"/bin/bin/cfg
esac

