#!/usr/bin/env bash
#  ▄▄▄▄· • ▌ ▄ ·. ▪  ▄▄▌   ▄▄· .▄▄ ·   ──────────────────────
#  ▐█ ▀█▪·██ ▐███▪██ ██•  ▐█ ▌▪▐█ ▀.   ╔╦╗╔═╗╔╦╗╔═╗╦╦  ╔═╗╔═╗
#  ▐█▀▀█▄▐█ ▌▐▌▐█·▐█·██ ▪ ██ ▄▄▄▀▀▀█▄   ║║║ ║ ║ ╠╣ ║║  ║╣ ╚═╗
#  ██▄▪▐███ ██▌▐█▌▐█▌▐█▌ ▄▐███▌▐█▄▪▐█  ═╩╝╚═╝ ╩ ╚  ╩╩═╝╚═╝╚═╝
#  ·▀▀▀▀ ▀▀  █▪▀▀▀▀▀▀.▀▀▀ ·▀▀▀  ▀▀▀▀   https://dot.bmilcs.com
#────────────────────────────────────────────────────────────
#   DISTRO-BASED SYSTEM UPDATE              
#────────────────────────────────────────────────────────────

source _head ; source _distro

_t system update

# arch
if [[ $DISTRO = arch* ]]; then
  _a pacman \& aur
	yay -Syyyuuu
  _s

# debian
elif [[ $DISTRO = debian* ]]; then

  _a apt full-upgrade 
	sudo apt full-upgrade -y
  _s

  _a apt autoremove 
	sudo apt autoremove -y
  _s

  _a apt clean 
	sudo apt clean -y
  _s

  _a apt autoclean 
	sudo apt autoclean -y
  _s

  # update pihole test
  if pihole -v PIHOLE &> /dev/null; then
    _a [bonus] pihole -up
    sudo pihole -up
  fi

  # docker-compose update test
  if docker-compose -v DOCKER-COMPOSE &> /dev/null; then
    _a [bonus] docker-compose up
    dcr
  fi

# end of debian
else

  _e unknown distro\! update me\!\!
  echo
  exit 1

fi

echo
